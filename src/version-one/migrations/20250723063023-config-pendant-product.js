'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface) {
   await queryInterface.sequelize.query(
      `
      CREATE TYPE public.pendant_bale_type AS ENUM
    ('slider', 'bale');

CREATE TABLE IF NOT EXISTS public.config_pendant_products
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    bale_type pendant_bale_type DEFAULT 'slider'::pendant_bale_type,
    design_type bigint NOT NULL,
    center_dia_wt bigint NOT NULL,
    center_dia_shape bigint NOT NULL,
    center_dia_mm_size bigint NOT NULL,
    center_dia_count bigint NOT NULL,
    style_no bigint NOT NULL,
    sort_description character varying COLLATE pg_catalog."default",
    long_description text COLLATE pg_catalog."default",
    labour_charge double precision,
    other_charge double precision,
    is_active bit(1) NOT NULL DEFAULT '1'::"bit",
    is_deleted bit(1) NOT NULL DEFAULT '0'::"bit",
    created_by bigint,
    created_at timestamp with time zone,
    modified_by bigint,
    modified_at timestamp with time zone,
    deleted_by bigint,
    deleted_at timestamp with time zone,
    company_info_id integer,
    name character varying COLLATE pg_catalog."default",
    sku character varying COLLATE pg_catalog."default",
    slug character varying COLLATE pg_catalog."default",
    CONSTRAINT config_pendant_products_pkey PRIMARY KEY (id),
    CONSTRAINT config_pendant_products_center_dia_mm_size_fkey FOREIGN KEY (center_dia_mm_size)
        REFERENCES public.mm_sizes (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT config_pendant_products_center_dia_shape_fkey FOREIGN KEY (center_dia_shape)
        REFERENCES public.diamond_shapes (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT config_pendant_products_center_dia_wt_fkey FOREIGN KEY (center_dia_wt)
        REFERENCES public.carat_sizes (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT config_pendant_products_created_by_fkey FOREIGN KEY (created_by)
        REFERENCES public.app_users (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT config_pendant_products_deleted_by_fkey FOREIGN KEY (deleted_by)
        REFERENCES public.app_users (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT config_pendant_products_modified_by_fkey FOREIGN KEY (modified_by)
        REFERENCES public.app_users (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT config_pendant_products_design_type_fkey FOREIGN KEY (design_type)
        REFERENCES public.heads (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.config_pendant_products
    OWNER to postgres;
      `
    )
  },

  async down(queryInterface) {
    await queryInterface.sequelize.query(
      `
      DROP TYPE IF EXISTS public.pendant_bale_type;
      DROP TABLE IF EXISTS public.config_pendant_products;
      `
    )
  }
};
