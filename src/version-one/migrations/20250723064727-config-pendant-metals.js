'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up (queryInterface) {
    await queryInterface.sequelize.query(
      `
      CREATE TABLE IF NOT EXISTS public.config_pendant_metals
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    pendant_id bigint NOT NULL,
    metal_id bigint NOT NULL,
    karat_id bigint,
    metal_wt double precision NOT NULL,
    company_info_id integer,
    CONSTRAINT pendant_metals_pkey PRIMARY KEY (id),
    CONSTRAINT pendant_metals_karat_id_fkey FOREIGN KEY (karat_id)
        REFERENCES public.gold_kts (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT pendant_metals_metal_id_fkey FOREIGN KEY (metal_id)
        REFERENCES public.metal_masters (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT pendant_metals_pendant_id_fkey FOREIGN KEY (pendant_id)
        REFERENCES public.config_pendant_products (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.config_pendant_metals
    OWNER to postgres;
      `
    );
  },

  async down (queryInterface) {
    await queryInterface.sequelize.query(
      `
      DROP TABLE IF EXISTS public.config_pendant_metals;
      `
    );
  }
};
