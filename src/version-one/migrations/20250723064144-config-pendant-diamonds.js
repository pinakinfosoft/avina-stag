'use strict';

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface) {
    await queryInterface.sequelize.query(
      `
      CREATE TABLE IF NOT EXISTS public.config_pendant_diamonds
(
    id bigint  NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    pendant_id bigint NOT NULL,
    dia_shape bigint NOT NULL,
    dia_weight double precision NOT NULL,
    dia_mm_size bigint,
    dia_count bigint NOT NULL,
    company_info_id integer,
    side_dia_prod_type character varying NOT NULL,
    CONSTRAINT pendant_diamonds_pkey PRIMARY KEY (id),
    CONSTRAINT pendant_diamonds_dia_mm_size_fkey FOREIGN KEY (dia_mm_size)
        REFERENCES public.mm_sizes (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT pendant_diamonds_dia_shape_fkey FOREIGN KEY (dia_shape)
        REFERENCES public.diamond_shapes (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT pendant_diamonds_pendant_id_fkey FOREIGN KEY (pendant_id)
        REFERENCES public.config_pendant_products (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.config_pendant_diamonds
    OWNER to postgres;
      `
    )
  },

  async down(queryInterface) {
    await queryInterface.sequelize.query(
      `
      DROP TABLE IF EXISTS public.config_pendant_diamonds;
      `
    )
  }
};
